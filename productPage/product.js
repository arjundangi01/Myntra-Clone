var mensData = [
  {
    image_url:
      "https://assets.myntassets.com/f_webp,fl_progressive/h_960,q_80,w_720/v1/assets/images/2340648/2018/4/26/11524727205135-Roadster-Men-Teal-Printed-Round-Neck-T-shirt-4881524727204967-1.jpg",
    brand: "Roadster",
    name: "Men V neck solid T-shirt",

    price: "Rs 5000",
    strikedoffprice: "2599",
    discount: "(60% off)",
    color: "black",
  },
  {
    image_url:
      "https://assets.myntassets.com/f_webp,dpr_1.5,q_60,w_400,c_limit,fl_progressive/assets/images/2308267/2018/1/29/11517216335231-Roadster-Men-Maroon-Printed-Round-Neck-T-shirt-5591517216335098-1.jpg",
    brand: "Friskerst",
    name: "Men V neck solid T-shirt",

    price: "Rs 800",
    strikedoffprice: "2599",
    discount: "(60% off)",
    color: "red",
  },
  {
    image_url:
      "https://assets.myntassets.com/f_webp,dpr_1.5,q_60,w_400,c_limit,fl_progressive/assets/images/21558202/2023/1/16/be972156-9d0f-4c85-8489-8edc6486da001673848914161EnnobleMenMulticolouredFloralPrintedExtendedSleevesT-shirt1.jpg",
    brand: "HRX by Hrithik Roshan",
    name: "Men V neck solid T-shirt",

    price: "Rs 269",
    strikedoffprice: "2599",
    discount: "(60% off)",
  },
  {
    image_url:
      "https://assets.myntassets.com/f_webp,dpr_1.5,q_60,w_400,c_limit,fl_progressive/assets/images/12816754/2021/1/13/57c09be6-a4ab-4dd6-8feb-4de7fc832eba1610534056070-HERENOW-Men-Tshirts-4261610534054075-1.jpg",
    brand: "Friskerst",
    name: "Men V neck solid T-shirt",

    price: " Rs 300",
    strikedoffprice: "2599",
    discount: "(60% off)",
    color: "red",
  },
  {
    image_url:
      "https://assets.myntassets.com/f_webp,dpr_1.5,q_60,w_400,c_limit,fl_progressive/assets/images/12907396/2020/12/29/5c69243c-4c58-4d13-9e08-aa0cbc30632e1609214540266-Roadster-Men-Yellow-Striped-Round-Neck-T-shirt-4861609214538-1.jpg",
    brand: "HRX by Hrithik Roshan",
    name: "Men V neck solid T-shirt",

    price: "Rs 700",
    strikedoffprice: "2599",
    discount: "(60% off)",
    color: "yellow",
  },
  {
    image_url:
      "https://assets.myntassets.com/f_webp,dpr_1.5,q_60,w_400,c_limit,fl_progressive/assets/images/13744608/2021/6/30/19b300a0-32d8-4a5c-b604-6112c81654821625050297123-Roadster-Men-Tshirts-4211625050296443-1.jpg",
    brand: "WROGN",
    name: "Men V neck solid T-shirt",

    price: "Rs 269",
    strikedoffprice: "2599",
    discount: "(60% off)",
    color: "yellow",
  },
  {
    image_url:
      "https://assets.myntassets.com/f_webp,dpr_1.5,q_60,w_400,c_limit,fl_progressive/assets/images/16886158/2022/4/27/b4cae8ee-c8f6-4d78-b092-fe04b83161d31651039320596-Harvard-Men-Tshirts-6781651039320079-1.jpg",
    brand: "WROGN",
    name: "Men V neck solid T-shirt",

    price: "Rs 1000",
    strikedoffprice: "2599",
    discount: "(60% off)",
  },
  {
    image_url:
      "https://assets.myntassets.com/f_webp,dpr_1.5,q_60,w_400,c_limit,fl_progressive/assets/images/14152094/2021/4/21/70d97f62-26cc-4589-a16b-fdc8b2d242141618988889184HIGHLANDERMenLimeGreenSolidRoundNeckT-shirt1.jpg",
    brand: "HERE&NOW",
    name: "Men V neck solid T-shirt",

    price: "Rs 16000",
    strikedoffprice: "2599",
    discount: "(60% off)",
  },
  {
    image_url:
      "https://assets.myntassets.com/f_webp,dpr_1.5,q_60,w_400,c_limit,fl_progressive/assets/images/2499226/2018/4/26/11524733798793-Roadster-Men-Maroon-Printed-Round-Neck-T-shirt-1491524733798592-1.jpg",
    brand: "HERE&NOW",
    name: "Men V neck solid T-shirt",

    price: "Rs 3000",
    strikedoffprice: "2599",
    discount: "(60% off)",
    color: "red",
  },
  {
    image_url:
      "https://assets.myntassets.com/f_webp,dpr_1.5,q_60,w_400,c_limit,fl_progressive/assets/images/23132668/2023/5/12/b6c33a2a-002f-49f6-b8a7-1c25400228ea1683876251190RARERABBITMenPurpleV-NeckPocketsSlimFitT-shirt1.jpg",
    brand: "HERE&NOW",
    name: "Men V neck solid T-shirt",

    price: "Rs 6000",
    strikedoffprice: "2599",
    discount: "(60% off)",
  },
  {
    image_url:
      "https://assets.myntassets.com/f_webp,dpr_1.5,q_60,w_400,c_limit,fl_progressive/assets/images/12817356/2020/12/22/212180fc-274d-4706-8deb-45f0e2b45cd21608627538718-HERENOW-Men-Tshirts-4561608627537615-1.jpg",
    brand: "HERE&NOW",
    name: "Men V neck solid T-shirt",

    price: "Rs 9500",
    strikedoffprice: "2599",
    discount: "(60% off)",
    color: "black",
  },
  {
    image_url:
      "https://assets.myntassets.com/f_webp,dpr_1.5,q_60,w_400,c_limit,fl_progressive/assets/images/productimage/2021/2/17/b420580e-7269-4233-a3c5-fcf82c336ee41613543492868-1.jpg",
    brand: "HERE&NOW",
    name: "Men V neck solid T-shirt",

    price: "Rs 9000",
    strikedoffprice: "2599",
    discount: "(60% off)",
    color: "white",
  },
  {
    image_url:
      "https://assets.myntassets.com/f_webp,dpr_1.5,q_60,w_400,c_limit,fl_progressive/assets/images/23132662/2023/5/12/ff564cf3-f711-4ca0-b977-427f65b9858c1683876244201RARERABBITMenNavyBlueStripedPoloCollarPocketsSlimFitT-shirt1.jpg",
    brand: "HERE&NOW",
    name: "Men V neck solid T-shirt",

    price: "Rs 18000",
    strikedoffprice: "2599",
    discount: "(60% off)",
  },
];
// console.log(mensData);

display(mensData);

function display(array) {
  var parent = document.querySelector("#product-page-item-div");
  parent.innerHTML = "";
  array.map(function (element, index) {
    var div = document.createElement("div");
    var img = document.createElement("img");
    img.setAttribute("src", element.image_url);
    img.setAttribute("alt", index);

    var h3 = document.createElement("h3");
    h3.textContent = element.brand;

    var name = document.createElement("p");
    name.textContent = element.name;

    // var btn = document.createElement("button")
    // btn.setAttribute("class","w-btn")
    // btn.textContent = "add to wishlist";

    var smalldiv = document.createElement("div");

    var price = document.createElement("p");
    price.textContent = element.price;

    var stprice = document.createElement("p");
    stprice.textContent = element.strikedoffprice;

    var discount = document.createElement("p");
    discount.textContent = element.discount;

    smalldiv.setAttribute("id", "price-small-div");
    smalldiv.append(price, stprice, discount);

    // ---------------------------------------------------------------------------
    var cartButton = document.createElement("button");
    cartButton.textContent = "Add to cart";
    cartButton.addEventListener("click", function () {
      var cartArray = JSON.parse(localStorage.getItem("cartArray")) || [];
      obj = {
        imgUrl: element.image_url,

        brand: element.brand,
        name: element.name,
        price: element.price,
        strikedoffprice: element.strikedoffprice,
        discount: element.discount,
      };
      cartArray.push(obj);
      localStorage.setItem("cartArray", JSON.stringify(cartArray));
    });

    var wishlist_button = document.createElement("button");
    wishlist_button.textContent = "Add to wishlist";
    wishlist_button.addEventListener("click", function () {});
    // ---------------------------------------------------------------------------
    div.append(img, h3, name, smalldiv);

    parent.append(div);
  });
}



// 
var sp = document.querySelector("#sort-drop >p>span");
var p1 = document.querySelector("#Recommended");
p1.addEventListener("click", function () {
  sp.textContent = p1.textContent;
  updateDisplay();
});
var p2 = document.querySelector("#Popularity");
p2.addEventListener("click", function () {
  sp.textContent = p2.textContent;
  updateDisplay();
});

var p3 = document.querySelector("#Price-High-to-Low");
p3.addEventListener("click", function () {
  sp.textContent = p3.textContent;
  updateDisplay();
});

var p4 = document.querySelector("#Price-Low-to-High");
p4.addEventListener("click", function () {
  sp.textContent = p4.textContent;
  updateDisplay();
});
// 

var brandsCheckboxes = Array.from(document.querySelectorAll(".brands"));
var colorCheckboxes = Array.from(document.querySelectorAll(".color"));
var priceCheckboxes = Array.from(document.querySelectorAll(".price"));

// Add event listeners to the checkboxes
brandsCheckboxes.forEach(function (checkbox) {
  checkbox.addEventListener("change", updateDisplay);
});

colorCheckboxes.forEach(function (checkbox) {
  checkbox.addEventListener("change", updateDisplay);
});

priceCheckboxes.forEach(function (checkbox) {
  checkbox.addEventListener("change", updateDisplay);
});
// Initial display update
updateDisplay();

function updateDisplay() {
  // Get the selected brands
  var selectedBrands = brandsCheckboxes
    .filter(function (checkbox) {
      return checkbox.checked;
    })
    .map(function (checkbox) {
      return checkbox.value;
    });

  // Get the selected colors
  var selectedColors = colorCheckboxes
    .filter(function (checkbox) {
      return checkbox.checked;
    })
    .map(function (checkbox) {
      return checkbox.value;
    });

  var selectedPrices = priceCheckboxes
    .filter(function (checkbox) {
      return checkbox.checked;
    })
    .map(function (checkbox) {
      return checkbox.value;
    });

  // Filter and sort the products
  var filteredAndSortedProducts = filterAndSortProducts(
    selectedBrands,
    selectedColors,
    selectedPrices
  );

  // Update the display with the filtered and sorted products
 
  
  if (sp.textContent == "Recommended") {
    display(filteredAndSortedProducts);
  } else if (sp.textContent == "Price High to Low") {
    var filterArr = filteredAndSortedProducts.sort(function (a, b) {
      if (parseInt(a.price.replace("Rs ", "")) > parseInt(b.price.replace("Rs ", ""))) {
        return -1
      } else {
        return 0
      }
    })
    display(filterArr)
    
  } else if (sp.textContent == "Price Low to High") {
    var filterArr = filteredAndSortedProducts.sort(function (a, b) {
      if (parseInt(a.price.replace("Rs ", "")) > parseInt(b.price.replace("Rs ", ""))) {
        return 0
      } else {
        return -1
      }
    })
    display(filterArr)
  }

  
}

function filterAndSortProducts(selectedBrands, selectedColors, selectedPrices) {
  // Check if no brands or colors are selected
  var noBrandsSelected = selectedBrands.length === 0;
  var noColorsSelected = selectedColors.length === 0;
  var noPriceRangesSelected = selectedPrices.length === 0;

  // Filter the products based on selected brands and colors
  var filteredProducts = mensData.filter(function (product) {
    var brandMatch = noBrandsSelected || selectedBrands.includes(product.brand);
    var colorMatch = noColorsSelected || selectedColors.includes(product.color);
    var priceMatch =
      noPriceRangesSelected ||
      selectedPrices.some(function (range) {
        var priceRange = range.split("-");
        var minPrice = parseInt(priceRange[0].replace("Rs ", ""));
        var maxPrice = parseInt(priceRange[1].replace("Rs ", ""));
        var productPrice = parseInt(product.price.replace("Rs ", ""));
        return productPrice >= minPrice && productPrice <= maxPrice;
      });
    return brandMatch && colorMatch && priceMatch;
  });

  // Sort the filtered products if needed
  // You can add sorting logic here based on your requirements

  return filteredProducts;
}
